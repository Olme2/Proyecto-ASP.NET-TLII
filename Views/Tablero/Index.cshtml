@model List<ListarTablerosVM>
@{
    var tablerosUsuario = ViewData["tablerosUsuario"] as List<ListarTablerosVM>;
    var esAdmin = ViewData["EsAdmin"];
    var errorMessage = TempData["ErrorMessage"];
}
@if (errorMessage!=null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @errorMessage
    </div>

    <script>
        setTimeout(() => document.querySelector(".alert").remove(), 5000);
    </script>
}
<h1>Lista de Tableros</h1>
@if(esAdmin!=null && (bool)esAdmin){
    @if(Model != null && Model.Count>0){
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Nombre</th>
                    <th>Descripcion</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody>
                @foreach(var tablero in Model){
                        <tr>
                            <td>@tablero.id</td>
                            <td>@tablero.nombre</td>
                            <td>@tablero.descripcion</td>
                            <td>
                                <a asp-action="ModificarTablero" asp-route-id="@tablero.id" class="btn btn-secondary">Modificar</a>
                                <a asp-action="EliminarTablero" asp-route-id="@tablero.id" class="btn btn-danger">Borrar</a>
                                <a asp-action="VerTablero" asp-route-id="@tablero.id" class="btn btn-info">Ver Tablero</a>
                                <a asp-controller="Tareas" asp-action="AltaTarea" asp-route-id="@tablero.id" class="btn btn-primary">Crear Tarea</a>
                            </td>
                        </tr>
                }
            </tbody>
        </table>
        <div class="text-center">
            <a asp-action="AltaTablero" class="btn btn-primary">Agregar Tablero</a>
        </div>
    }
}else{
    <h2>Mis Tableros</h2>
    @if(tablerosUsuario != null &&  tablerosUsuario.Count>0){
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Nombre</th>
                    <th>Descripcion</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody>
                @foreach(var tablero in tablerosUsuario){
                        <tr>
                            <td>@tablero.id</td>
                            <td>@tablero.nombre</td>
                            <td>@tablero.descripcion</td>
                            <td>
                                <a asp-action="ModificarTablero" asp-route-id="@tablero.id" class="btn btn-secondary">Modificar</a>
                                <a asp-action="EliminarTablero" asp-route-id="@tablero.id" class="btn btn-danger">Borrar</a>
                                <a asp-action="VerTablero" asp-route-id="@tablero.id" class="btn btn-info">Ver Tablero</a>
                                <a asp-controller="Tareas" asp-action="AltaTarea" asp-route-id="@tablero.id" class="btn btn-primary">Crear Tarea</a>
                            </td>
                        </tr>
                }
            </tbody>
        </table>
    }else{
        <h3 class="text-center text-muted">SIN TABLEROS</h3>
    }
    <div class="text-center">
        <a asp-action="AltaTablero" class="btn btn-primary">Agregar Tablero</a>
    </div>
    <h2>Tableros con Tareas Asignadas</h2>
    @if(Model.Count>0){
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Nombre</th>
                    <th>Descripcion</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody>
                @foreach(var tablero in Model){
                    <tr>
                        <td>@tablero.id</td>
                        <td>@tablero.nombre</td>
                        <td>@tablero.descripcion</td>
                        <td>
                            <a asp-action="VerTablero" asp-route-id="@tablero.id" class="btn btn-info">Ver Tablero</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }else{
        <h3 class="text-center text-muted">SIN TABLEROS</h3>
    }
}
